# vue-go

## JWT

в jwt храним какие-то данные, access token храним в памяти клиентского приложения
refresh token храним в httpOnly куке для того, чтобы не было возможности её перезаписать через js

header.payload.cignature
сигнатура - header(base64).payload(base64) - зашифрованное специальным кодовым словом
токен нужен не для зашифрованной отправки данных, а для проверки того, что запрос был валидный

Какой-то защищенный запрос, который учитывает источник (???) - проверка ip не вариант, потому что в процессе использования возможна смена ip клиента (переключение мобильного оператора или переключение с wifi на мобильный интернет),
так же есть fingerprint браузера (FingerPrintJs, который собирает данные браузера и проверяет подлинность клиента)
токены храним в redis для реализации возможности хранить сессии для нескольких устройств сразу (максимум 5)

fingerprint, в axios для отправки запроса с куками есть опция (withCredentials: true)

в jwt храним expiresIn, который проверяется на стороне клиента для проверки актуальности токена, как access, так и refresh
в бэкенде храним только секретное слово, по которому проверяем валидность access token'а. Сам токен хранить нет никакого смысла

Проверка: берем заголовок и payload токена и кодируем с помощью hmac-sha256 и приватного ключа. Сравинваем с сигнатурой их токена. Если совпадают, значит аутентификация прошла успешно.

Преимущества работы с токеном:
1. Мобильным приложениям с токенами работать проще
2. В микросервисной архитектуре зачастую микросервисы раскиданы по разным доменам, а куки не поддерживают кросс-доменные запросы
3. При использовании jwt мы подразумеваем утечку и прорабатываем негативные сценарии. При использовании куки такого просто нет.
4. Использование jwt избавляет бэкенд от одного лишнего запроса к БД


## Go

1. Можно ли вне метода обращаться к структуре

func (d *Dog) Bark() {} // * - указатель на структуру, мы модем менять данные напрямую 